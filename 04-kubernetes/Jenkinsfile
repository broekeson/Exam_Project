pipeline {
 agent any
  stages {
    stage('authenticate'){
       steps {
          withKubeConfig([credentialsId: 'my-kubeconfig-credentials', kubeconfigFile: '/var/lib/jenkins/workspace/altschool/01-terraform/kubeconfig.yam']){ 
          sh "curl https://raw.githubusercontent.com/helm/helm/master/scripts/get-helm-3 | bash"
          sh 'helm repo add ingress-nginx https://kubernetes.github.io/ingress-nginx'
          sh 'helm repo update'
          sh 'helm install nginx-ingress ingress-nginx/ingress-nginx'
          }
    }
  }
 } 
} 